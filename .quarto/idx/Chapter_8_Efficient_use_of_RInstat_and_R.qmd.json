{"title":"Efficient use of R-Instat and R","markdown":{"headingText":"Efficient use of R-Instat and R","containsRefs":false,"markdown":"## Introduction\n\nIn this guide Chapters 2 and 3 largely made use of the general\nfacilities in R-Instat, shown in Fig. 8.1a. They were dialogues from the\nFile, Prepare and Describe menus. Chapters 4 to 7 used the climatic menu\nshown in Fig. 8.1b\n\n  -----------------------------------------------------------------------------------------------------------\n  ***Fig. 8.1a The R-Instat menus***                    ***Fig. 8.1b The Climatic menu***\n  ----------------------------------------------------- -----------------------------------------------------\n  ![](media/image237.png){width=\"3.070092957130359in\"   ![](media/image230.png){width=\"2.949284776902887in\"\n  height=\"1.693844050743657in\"}                         height=\"3.438086176727909in\"}\n\n  -----------------------------------------------------------------------------------------------------------\n\nThe Climatic menu, Fig. 8.1b, mirrors the general menus, Fig. 8.1a in\nthat parts of this menu correspond to the facilities in the File,\nPrepare, Describe and Model menus. Thus you start by getting the File\nwith the data. Then there is usually a Prepare stage, where the data are\norganised and checked, ready for analysis. This stage often includes a\n\"reshaping\" of the data, where daily records are summarised to a monthly\nor yearly basis.\n\nThen the initial analyses are usually descriptive, so use the Describe\nsection of the Climatic menu or the Describe menu itself. The materials\nin Chapters 4 to 7 were all devoted to descriptive analyses.\n\nWhen descriptive methods are not enough there is the Model menu to fit\nand examine statistical models.\n\nFor users who are starting their climatic analyses with R-Instat we\ndistinguish between four or five \"levels\". These different \"levels\" are\ndiscussed in this chapter.\n\n1.  If your analyses are \"standard\", then you may find all you need is\n    in the climatic menu. That is the idea of the special menu.\n\n2.  If you need more, then the general R-Instat menus may be used. The\n    Prepare menu is sometimes needed for more of the initial data\n    manipulation than is in the climatic menu. The powerful ggplot2\n    graphics system is also available through the Describe menu.\n\n3.  R-Instat includes some \"halfway\" dialogues, that we discuss in\n    Section 8.3. These are dialogues where you have essentially to write\n    a single R command. That's quite easy and can be a stepping-stone to\n    using R directly.\n\n4.  Sometimes a dialogue does not do quite what is needed for an\n    analysis. The ***To Script*** button, is on each dialogue and copies\n    the relevant R command to a special script window. You can then\n    \"tweak\" the resulting command(s) to produce the appropriate\n    analysis. This is described in Section 8.4.\n\n5.  Finally, you may be ready to use R \"properly\"! This is either\n    because the analysis you need is not available in R-Instat, or\n    because the click and point method is becoming tedious and you would\n    like to work more efficiently. One option is then still to start in\n    R-Instat. Then produce the log file, which has a record of all the\n    commands you have used. This may be transferred and should run just\n    the same in RStudio. Then you can continue the analyses using R\n    directly. This process is described in Section 8.5.\n\nMost of the ideas in this chapter and also discussed in more detail in\nthe R-Instat guide called \"Reading, Tweaking and Using R Commands\".\n\n[Solving problems rather than learning to use R-Instat.]{.mark}\n\nPossibly discuss loops for successive analysis of data for multiple\nstations\n\n## Using the \"ordinary\" R-Instat\n\n[Could show smoothing with loess and splines]{.mark}, though a bit of\nthat in Chapter 7. Could refer back\n\n[Mention export of graphs for an editor: \\\"I\\'d suggest exporting the\nfigure from R as a vector graphic file (.svg) then adding your labels in\na vector graphic software. I use **Inkscape**\n[[software]{.underline}](https://inkscape.org/about/) because it can be\ndownloaded for free and its fairly intuitive to learn.\\\"]{.mark}\n\n[Also discuss data sheet and data book -- though also in Chapter\n3.]{.mark}\n\n[And the metadata windows, including changing names and also altering\nprecision.]{.mark}\n\n[Could perhaps be a good place to discuss the Tools \\> Options dialogue\n-- though maybe that deserves its own section?]{.mark}\n\nOn tasks in this section include summary of hourly to daily data\nprobably with the example from the openair package?\n\n## The halfway dialogues\n\n[Mention the risks that using these commands brings. Can make mistakes.\nGood to make some mistakes intentionally so that you are ready for\nthem.]{.mark}\n\n[Use an example of infilling data and the calculate dialogue -\ntransform. Could use infilling of temperatures to work towards a\ncomplete record.Could install chillR partly because they have an\ninteresting data set where they have introduced missing values. Also\nbecause their ideas on infilling will be generally useful for R-Instat\nin the future.]{.mark}\n\n[Then also the model and use model menu. This could include modelling\nextremes.]{.mark}\n\n## The script window\n\n[Add an R package:]{.mark}\n\n[install.packages('packagename')]{.mark}\n\n[Tried Install.packages(\"finalfit\") -- which gives an error? Wrong\nquotes! Use\nInstall.packages(]{.mark}***\\\"***[finalfit]{.mark}***\\\"***[)]{.mark}\n\n[To use data without needing to give the full name include\nattach(\"dataframename\")]{.mark}\n\nlibrary() lists all available packages\n\nlibrary(dplyr) makes the package available, so can give the commands\nwithout dplyr:: at the start.\n\nMove the example here from Chapter 3 of adding a skew boxplot.\n\n## The log window and R \n\n+-----------------------------------------------------------------------+\n| ***Code to add date to an x-variable***                               |\n+=======================================================================+\n| \\# Code generated by the dialog, Line Plot                            |\n|                                                                       |\n| Moorings_by_s_doy \\<-                                                 |\n| data_book\\$get_data_frame(data_name=\\\"Moorings_by_s_doy\\\",            |\n| stack_data=TRUE, id.vars=\\\"s_doy\\\",                                   |\n| measure.vars=c(\\\"prop120.lt.600\\\",\\\"prop120.lt.450\\\"))                |\n|                                                                       |\n| [Moorings_by_s_doy \\<- Moorings_by_s_doy %\\>%                         |\n| mutate(s_doy=as.Date(s_doy, origin = \\\"2015-07-31\\\"))]{.mark}         |\n|                                                                       |\n| last_graph \\<- ggplot2::ggplot(data=Moorings_by_s_doy,                |\n| mapping=ggplot2::aes(x=s_doy, y=value, colour=variable)) +            |\n| ggplot2::geom_line() + theme_grey() +                                 |\n| ggplot2::theme(axis.text.x=ggplot2::element_text()) +                 |\n| ggplot2::scale_y_continuous(limits=c(0, 1))[+scale_x_date(date_labels |\n| = \\\"%d %b\\\", date_breaks=\\\"1 month\\\")]{.mark}                         |\n|                                                                       |\n| data_book\\$add_graph(graph_name=\\\"last_graph\\\", graph=last_graph,     |\n| data_name=\\\"Moorings_by_s_doy\\\")                                      |\n|                                                                       |\n| data_book\\$get_graphs(data_name=\\\"Moorings_by_s_doy\\\",                |\n| graph_name=\\\"last_graph\\\")                                            |\n|                                                                       |\n| rm(list=c(\\\"last_graph\\\", \\\"Moorings_by_s_doy\\\"))                     |\n+-----------------------------------------------------------------------+","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"Chapter_8_Efficient_use_of_RInstat_and_R.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.45","bibliography":["references.bib"],"theme":"cosmo"},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","output-file":"Chapter_8_Efficient_use_of_RInstat_and_R.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"block-headings":true,"bibliography":["references.bib"],"documentclass":"scrreprt"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf"]}