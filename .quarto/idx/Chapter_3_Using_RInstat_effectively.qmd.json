{"title":"Using R-Instat effectively","markdown":{"headingText":"Using R-Instat effectively","containsRefs":false,"markdown":"## Introduction\n\nR-Instat is simply a front end to the R programming language, Wikipedia\n(2019). R started in the 1990s and consists of a relatively small core,\nthat is maintained by the R development core team. There are then also\nover 12 thousand packages that extend R's capabilities. About 200 of\nthese packages are included (behind the scenes) in R-Instat.\n\nThe front end in R-Instat is written in Visual Basic.Net. This front end\nprovides the menus and dialogues that are used to run R-Instat. The\ndefault view of R-Instat is shown in Fig. 3.1a. It has 2 windows, one\nshowing part of the data and the other is for the results or output.\n\n  ---------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.1a***\n  ---------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.1a.png){width=\"6.158751093613298in\"\n  \n  height=\"3.271836176727909in\"}\n\n  ---------------------------------------------------------------------------------------------------------------------\n\nR-Instat looks a little like a spreadsheet package, but there are\ndifferences. One, shown in Fig. 3.1, is that the results are in a\nseparate window, rather than on successive sheets. Also, the data shown\nin Fig. 3.1a are stored in an R data frame (behind the scenes) and what\nyou see is often only a small part of these data.\n\nCurrent spreadsheets have a limit of about 1million rows. This not a\nlimit in R, (or therefore in R-Instat) where your machine's memory\nimposes a limit that is usually larger. However, the effort of\ncontinually copying all the data to the front end would slow R-Instat\nand hence (by default) we just show the first 1000 rows of data and the\nfirst 30 columns[^8].\n\nOne way to see all the data in the current data frame[^9] is shown in\nFig. 3.1b. Just ***right-click*** on the tab at the bottom and choose\n***View Data Frame,*** Fig. 3.1c.\n\n  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.1b***                                         ***Fig. 3.1c***\n  ------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.1b.png){width=\"2.1374267279090113in\"   ![](figures/Fig3.1c.png){width=\"3.9064785651793525in\"\n  height=\"2.0438856080489938in\"}                          height=\"2.8405096237970255in\"}\n\n  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nThe same result could alternatively be done through ***Prepare \\> Data\nFrame \\> View data*** as shown in Fig. 3.1d. This gives a dialogue. From\nhere, as shown in Fig. 3.1e, you can choose any of the open Data Frames.\nThen click Ok to again show the data in R, Fig. 3.1c.\n\n  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.1d***                                         ***Fig. 3.1e***\n  ------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.1d.png){width=\"2.9987478127734035in\"   ![](figures/Fig3.1e.png){width=\"2.9707206911636046in\"\n  height=\"2.4772265966754157in\"}                          height=\"2.9802416885389325in\"}\n\n  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nThe menu and dialogue in Fig. 3.1d and 3.1e are all part of the\n\"front-end\" of R-Instat. When you click Ok, R-Instat constructs an R\ncommand and sends it to R. The results are then returned to the\nfront-end.\n\nThe output (results) window shows the R command that has been sent, as\nwell as the output, if any. ***Right-click*** in the ***Output\nWindow***, Fig. 3.1f, if you wish to turn this off for future commands.\n\nIn the data window ***right-click in the name field*** to provide some\ncommon options, Fig. 3.1g. Alternatively, each of these options is\navailable from the ***Prepare Menu***.\n\n  ---------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.1f***                                         ***Fig. 3.1g***\n  ------------------------------------------------------- -------------------------------------------------------\n  ![](figures/Fig3.1f.png){width=\"3.0241666666666664in\"   ![](figures/Fig3.1g.png){width=\"2.9767508748906386in\"\n  height=\"2.0632163167104114in\"}                          height=\"2.69in\"}\n\n  ---------------------------------------------------------------------------------------------------------------\n\nThe data and output windows are the most important in R-Instat. There\nare four more windows. The use of the two metadata windows is described\nin Section 3.2 and the Log plus Script Windows are described in Section\n3.3.\n\n## Column and data frame metadata\n\nThe R data frames used through R-Instat contain data together with some\nmetadata. The name of each variable is part of the metadata as is a\nlabel for each variable. R-Instat has data in a set of\n***data-sheets***. An R-Instat ***data sheet*** is an R data frame with\nadded metadata. The added information includes information on key\ncolumns together with links to other sheets. This helps R-Instat keep\ntrack of multiple data frames that are connected, such as the monthly\nsummaries calculated from the daily data. A data sheet also keeps\ninformation on objects that have been produced and saved, such as graphs\nand models.\n\n  -----------------------------------------------------------------------\n  ***Fig. 3.2a The toolbar and View menu***\n  -----------------------------------------------------------------------\n  ![](figures/Fig3.2a.png){width=\"5.884278215223097in\"\n  height=\"2.321505905511811in\"}\n\n  -----------------------------------------------------------------------\n\nUse the ![](Figures/Fig3.1h.png){width=\"0.32342629046369203in\"\nheight=\"0.29291447944007in\"} icon on the toolbar, (Fig. 3.2a) or ***View\n\\> Column Metadata*** to see the metadata currently associated with each\nopen data frame. An example is in the top left in Fig. 3.2b.\n\n  ---------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.2b***\n  ---------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.2b.png){width=\"6.193180227471566in\"\n  height=\"3.7589031058617675in\"}\n\n  ---------------------------------------------------------------------------------------------------------------------\n\nAs with Excel you can open multiple data frames when using R-Instat. The\ncolumn metadata shown in Fig. 3.2b has tabs at the bottom, just like the\ndata (also shown in Fig. 3.2b), so you can check on the metadata for any\ndata frame. An R-Instat ***data book*** is the set of open ***data\nsheets.***\n\nUsing ***View \\> Data Frame Metadata***, Fig. 3.2b (top right) opens\nanother window in which each row shows the metadata on a data sheet. The\ninformation in Fig. 3.2b includes the name of the sheet, an optional\ndescriptive label, and the number of columns currently in the sheet.\n\nIf you use ***File \\> Save As \\> File Data As,*** Fig. 3.2c, at any\nstage, then R-Instat saves the whole data book, i.e. all the data\nframes, together with all the associated meta data, into a single file.\nThis file has the extension RDS and this data book can later be\nre-opened in R-Instat[^10]. Good practice is usually to work on a single\ntopic in each data book, i.e. the different data sheets are usually\ninterconnected. As with Excel, there is nothing stopping you having all\nsorts of unconnected data sheets in the same book, but this usually\ncomplicates your work.\n\nSome tasks are made simpler through the Column Metadata window, Fig.\n3.2d. You can double-click in the name field of any column to change the\nname. You can add or change the label in the same way, Fig. 3.2. For\nnumeric columns R chooses the number of significant figures to display.\nThat is also shown in the metadata and can be changed[^11]. In addition,\nas shown in Fig. 3.2c, right clicking on the left-hand side gives the\nsame popup menu of common tasks as is available from the data view.\n\n  ---------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.2c***                                         ***Fig. 3.2d***\n  ------------------------------------------------------- -------------------------------------------------------\n  ![](figures/Fig3.2c.png){width=\"2.7479910323709538in\"   ![](figures/Fig3.2d.png){width=\"3.1687871828521437in\"\n  height=\"2.1073818897637797in\"}                          height=\"3.7432458442694663in\"}\n\n  ---------------------------------------------------------------------------------------------------------------\n\nEach Window button in the toolbar, Fig. 3.2e and the Options in the View\nMenu, Fig. 3.2f act like an on-off switch. So now use the curly arrow to\nreset to the default of the data and output windows side by side.\n\n  --------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.2e***                                         ***Fig. 3.2f***\n  ------------------------------------------------------- ------------------------------------------------------\n  ![](figures/Fig3.2e.png){width=\"2.7795439632545933in\"   ![](figures/Fig3.2f.png){width=\"2.180667104111986in\"\n  height=\"2.5554516622922137in\"}                          height=\"2.7015277777777778in\"}\n\n  --------------------------------------------------------------------------------------------------------------\n\nIn this section we have added more of the 6 Windows available in\nR-Instat. The opposite is also useful. Once in the default layout,\nswitching off the Data Window gives just the Output (Results) Window. Or\nswitch off the Output Window to look at more columns of data. However,\nin that case remember to switch on the Output window to see any further\nresults.\n\n## Graphs\n\nBase R has a comprehensive graphics system, and this is used by many R\npackages. The grammar of graphics, Wilkinson (2005) is an influential\nbook and has led to the exciting ggplot package (gg for grammar of\ngraphics) and graphics system in R. One challenge we had in constructing\nR-Instat was to make the ggplot system easy to use. Almost all the\ngraphs in this guide use this system. One example that does not, is the\nadjusted boxplot shown in Fig. 3.5i.\n\nIn this section we describe key concepts of the ggplot system and of our\nimplementation.\n\nOne concept is \"facets\". Fig. 2.4u is an example of a facetted graph,\nwhere there is one facet for each month. The default is for the x and y\nscales to be the same for each graph[^12], so the months can be compared\neasily. Also, you are not diverted by lots of axis scales for each\nmonth.\n\nSome multiple graphs show different information in each pane, as was\nseen in Fig. 2.4m.\n\nWithin a graph you can have multiple layers. So, there are 2 layers in\nFig. 2.4r, one for the station and the other for the satellite data. In\nChapter 10 one layer in a map shows the districts in a country and\nanother shows the position of each climatic station.\n\nIn each layer there is a geometric shape, or geom. A geom may be a\npoint, a line, a boxplot etc.\n\nIn R-Instat the common geoms have their own dialogue as shown in Fig.\n3.3a. We choose a boxplot in Fig. 3.3b for Tmax at Dodoma by month.\n\n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.3a***                                         ***Fig. 3.3b***\n  ------------------------------------------------------- ---------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.3a.png){width=\"2.7233081802274715in\"   ![](figures/Fig3.3b.png){width=\"2.960900043744532in\"\n  height=\"2.9685115923009624in\"}                          height=\"3.381676509186352in\"}\n\n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nEvery graphics dialogue includes the option to save the resulting graph,\nby giving it a name. In Fig. 3.3b we called the graph Tmax_boxplot. This\nggplot graph is now saved as part of the metadata associated with the\nDodoma data frame.\n\nIf you don't give a name, then the default name of last_graph is given\nautomatically. But, of course, that name is overwritten when you do the\nnext graph.\n\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.3c***                                         ***Fig. 3.3d***\n  ------------------------------------------------------- ---------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.3c.png){width=\"2.7233081802274715in\"   ![](figures/Fig3.3d.png){width=\"2.960900043744532in\"\n  height=\"2.811914916885389in\"}                          height=\"2.83132217847769in\"}\n\n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nDouble-click in the graph, Fig, 3.3d to turn it blue. This also produces\nthe popup menu and the graph can be copied to the clipboard.\n\nAn alternative is shown in Fig. 3.3e. ***Click*** on graph icon\n![](Figures/Fig3.1i.png){width=\"0.315670384951881in\"\nheight=\"0.25253608923884513in\"} in the toolbar to show the last graph in\nR's viewer. This only shows a single graph, but the Window can be\nresized and, as shown in Fig. 3.3e, there are now many options to save\nthe graph, or to copy it to the clipboard.\n\nThis toolbar option is only for the most recent graph. The ***Describe\n\\> View Graph*** dialogue, Fig. 3.3f provides the option to view any of\nthe saved graphs in this way[^13].\n\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.3e The R graph viewer***                                         ***Fig. 3.3f Options for reviewing***\n  ------------------------------------------------------- ---------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.3e.png){width=\"2.7233081802274715in\"   ![](figures/Fig3.3f.png){width=\"2.960900043744532in\"\n  height=\"3.179398512685914in\"}                                               height=\"2.081327646544182in\"}\n\n  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nWe use the dialogue in Fig. 3.3f to show a third way to examine graphs;\none that makes use of the excellent plotly package. This is called the\nInteractive Viewer in Fig. 3.3f. This opens the graph in a browser\n(though you don't need to be online) as shown in Fig. 3.3g.\n\n  -----------------------------------------------------------------------\n  ***Fig.3.3g The (plotly) interactive viewer for ggplot graphs***\n  -----------------------------------------------------------------------\n  ![](figures/Fig3.3g.png){width=\"6.0783005249343836in\"\n  height=\"3.5125656167979002in\"}\n\n  -----------------------------------------------------------------------\n\nIn Fig. 3.3g the data for October are shown. This demonstrates that the\nboxplot shows the median (30.6°C), the quartiles, etc. In addition, you\ncan hover over any point to find its value and zoom if a part of the\nplot is of special interest. This is a system worth exploring, so we add\na second example. This also shows the value of facets in a graph.\n\nUse ***Describe \\> Specific \\> Scatterplot*** to examine Tmax as the Y\nvariable against Tmin as the X, Fig. 3.3h.\n\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.3h Initial use of scatter plot (geom point)***                                         ***Fig. 3.3i Resulting Graph***\n  ------------------------------------------------------- ---------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.3h.png){width=\"2.7233081802274715in\"   ![](figures/Fig3.3i.png){width=\"2.960900043744532in\"\n  height=\"2.9541699475065615in\"}  \nheight=\"2.9195220909886266in\"}  \n\n ---------------------------------------------------------------------------\n \nThe resulting graph is relatively uninformative, except to demonstrate\nthere is a lot of data. And you don't need a special graphics system for\na single graph like this. It does show there are a few outlying points\nthat require closer investigation.\n\nMore concerning, as a principle, is that these are time series data. One\nproperty of time series is the seasonality and we could allow for this\nby looking separately at each month.\n\nReturn to the dialogue in Fig. 3.3h. Click on ***Plot Options*** and add\nthe ***month*** factor as a facet, Fig. 3.3j. Press Return on the\nsub-dialogue. Then make the ***By Variable*** also the ***month***\nfactor and the L***abel Variable*** the ***Date***. Click OK to produce\nthe result shown in Fig. 3.3k.\n\n  -------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.3j Plot options sub-dialogue***              ***Fig. 3.3kTmax v Tmin by month***\n  ------------------------------------------------------ ------------------------------------------------------\n  ![](figures/Fig3.3j.png){width=\"2.646576990376203in\"   ![](figures/Fig3.3k.png){width=\"3.072049431321085in\"\n  height=\"2.242176290463692in\"}                          height=\"3.263601268591426in\"}\n\n  -------------------------------------------------------------------------------------------------------------\n\nOne feature of the graph in Fig. 3.3k is that there is the same x and y\nscales for each graph. This is appropriate here and has then the big\nadvantage that the graph is not cluttered with many axes, so the data\nare more easily compared.\n\nAs with the overall graph in Fig 3.3i, one aspect to be investigated,\nfrom Fig. 3.3k, is the outliers. This is easily done via the interactive\nviewer. So, return to ***Describe \\> View Graph*** and choose the last\ngraph, possibly called scatter_Tmax.Tmin from Fig. 3.3h (or just\nlast_graph if no name was given).\n\n  -----------------------------------------------------------------------\n  ***Fig 3.3l Interactive view***\n  -----------------------------------------------------------------------\n  ![](figures/Fig3.3l.png){width=\"6.161750874890639in\"\n  height=\"2.648064304461942in\"}\n\n  -----------------------------------------------------------------------\n\nThe new feature in Fig. 3.3l is that you can now hover over any point\nand see the values in more detail. The example shown in Fig. 3.3l is\nthat on 9 October 1989 both Tmax and Tmin were 15.6°C. Worth checking!\nFrom the graph 15.6°C is very sensible for Tmin but not for Tmax[^14].\n\nOther dialogues also provide useful graphs. As an example, use\n***Describe \\> Multivariate \\> Correlations***, Fig. 3.3m as in Chapter\n2.\n\n  ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.3m***                                        ***Fig. 3.3n***\n  ------------------------------------------------------ ---------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.3m.png){width=\"2.706126421697288in\"   ![](figures/Fig3.3n.png){width=\"3.306842738407699in\"\n  height=\"1.9848436132983378in\"}                         height=\"3.208082895888014in\"}\n\n  ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nComplete the dialogue as shown in Fig. 3.3n. Click on the Options button\nand complete the sub-dialogue as shown in Fig. 3.3o. The resulting\ndisplay is in Fig. 3.3p.\n\nFor the data this indicates that both Tmax and Tmin have roughly normal\ndistributions each month. The correlations are quite low. As with the\nother graphs more detail can be found from the plotly interactive\ndisplay.\n\n ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.3o Correlations subdialog***                                        ***Fig. 3.3p Distributions, Scatter plot and Correlations***\n  ------------------------------------------------------ ---------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.3o.png){width=\"2.6294061679790026in\"   ![](figures/Fig3.3p.png){width=\"3.326188757655293in\"\n  height=\"2.8274879702537183in\"}                                              height=\"3.118300524934383in\"}\n\n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nThis is an example of a graphical display where the different panes show\ndifferent types of display. Indeed, one pane is numeric. We used to\nthink that a display in a graph was distinct from displaying tables of\nresults. But Fig. 3.3p is like a 2 by 2 table, one cell of which\ncontains numbers, while the others contain graphs.\n\nFinish this section with a little \"housekeeping\". Several objects\n(graphs) have been produced and perhaps are now no longer needed. Use\n***Prepare \\> R Objects \\> Delete***, Fig. 3.3q.\n\n  ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.3q Menu to manage R objects***                ***Fig. 3.3r Delete objects no longer needed***\n  ------------------------------------------------------- --------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.3q.png){width=\"2.2876793525809274in\"   ![](figures/Fig3.3r.png){width=\"3.70708552055993in\"\n  height=\"2.877690288713911in\"}                           height=\"2.5941666666666667in\"}\n\n  ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nWe choose to delete all the objects, Fig. 3.3r.\n\n## The log and script windows\n\nThe final two Windows in R-Instat are for the Log Window and the Script\nWindow.\n\nThe R programming language is very powerful, but with a relatively steep\nlearning curve. R-Instat gives easy access to a subset of R. However, a\nclick-and-point system always has limitations. We consider here some\noptions if these limitations are ever a constraint.\n\nThe log file keeps a record of all the R-commands that have been issued\nduring a session of R-Instat. Use the toolbar option\n![](figures/Fig3.1h.png){width=\"0.288507217847769in\"\nheight=\"0.2764862204724409in\"}, Fig. 3.2e, or ***View \\> Log Window***\nto open the log file.\n\nIn the Log file, the ***right-click menu*** gives various options, Fig.\n3.4a, including saving the log file. That action is the same as using\n***File \\> Save As \\> Save Log As***, shown earlier in Fig. 3.2c.\n\n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.4a The Log Window***                         ***Fig. 3.4b The Filter Dialogue***\n  ------------------------------------------------------ ----------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.4a.png){width=\"3.025767716535433in\"   ![](figures/Fig3.4b.png){width=\"2.9556944444444446in\"\n  height=\"1.6994028871391076in\"}                         height=\"2.965126859142607in\"}\n\n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nThe Log file keeps an exact record of what you have done so far in your\nR-Instat work. That is useful. If, later, you ever had to justify how\nyou produced results, then this is your record of what was done.\n\nIf you need to ask for help, then we will usually want to relate\nanything extra to the best you have been able to do so far. A skilled R\nuser can see exactly what was done through the log file.\n\nIf R is used directly, then we suggest it be used through RStudio. The\nlog file can be run in RStudio and should produce the same results.\nHence, an analysis could start in R-Instat and then continue in RStudio\nif further results are needed that cannot be done through R-Instat.\n\nSometimes a dialogue can almost do an analysis, but not quite. If small\nchanges are needed to a command then they can be done, in R-Instat, with\nthe Script Window\n\nA guide called \"Reading, Tweaking and Using R Commands\",\n[reference]{.mark} allows users to adapt the commands behind any\ndialogue. This situation is illustrated with an example.\n\nWe show how to use adjusted boxplots (Hubert & Vandervieren, 2008) for\neach month with the rainfall data from Dodoma. This is first illustrated\nwith the ordinary boxplots that are available (and very useful).\nHowever, for the rainfall we would like to have adjusted boxplots\nbecause of the skewness of the data. They are available in the R\npackage, called ***robustbase*** [reference]{.mark} that is already used\nby R-Instat. But adjusted boxplots are not yet available -- at least\nwhen this guide was first written.\n\nFirst the data are filtered for just the rain days. Then the boxplots\nare produced.\n\nWith the Dodoma data, as used in Chapter 2, use the ***right-click***\nmenu (or ***Prepare \\> Data Frame \\> Filter***) to give the Filter\ndialogue, Fig. 3.4b. Note, in Fig. 3.4b, that the Ok button is not yet\nenabled. There is also a Script button on the bottom right of the\ndialogue, and this is also disabled. Every dialogue has the same set of\nfive buttons at the bottom. Hence, every dialogue has a ***Script***\nbutton and here we show how it can be used. In Fig. 3.4b, press on the\n***Define New Filter*** button to open the Filter sub-dialogue. In the\nsub-dialogue, Fig. 3.4c.\n\n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.4c The filter sub-dialogue***                 ***Fig. 3.4d The filter dialogue completed***\n  ------------------------------------------------------- ---------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.4c.png){width=\"3.1675339020122486in\"   ![](figures/Fig3.4d.png){width=\"2.766781496062992in\"\n  height=\"2.7031200787401577in\"}                          height=\"2.775612423447069in\"}\n\n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nIn the sub-dialogue, choose the ***Rain*** variable and make the\ncondition as ***Rain \\> 0.85***. Then click the ***Add Condition***\nbutton, then press the ***Return*** button. A filter has now been\nselected and hence the Ok button is now enabled. We don't need the To\nScript button at this stage, but note that it has also been enabled.\n\nNow use the ***Describe \\> Specific \\> Boxplot*** dialogue and complete\nit as shown in Fig. 3.4e.\n\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.4e The boxplot dialogue***                 ***Fig. 3.4f Boxplots with width proportional to number of raindays***\n  ------------------------------------------------------- ---------------------------------------------------------------------------------------------------------------------\n  ![](figures/Fig3.4e.png){width=\"2.8051170166229222in\"   ![](figures/Fig3.4f.png){width=\"3.125in\"\n  height=\"3.203753280839895in\"}                                               height=\"3.125in\"}\n\n  -----------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nThe results are in Fig. 3.4f. They are useful, and pleasantly colourful,\nbut the number of outliers shows that the ordinary boxplot is not ideal\nfor data that are as skew as daily rainfall.\n\nSo, return to the boxplot dialogue in Fig. 3.4e and press the ***To\nScript*** button. The commands are as shown in Fig. 3.4g\n\n+-----------------------------------------------------------------------+\n| ***Fig. 3.4g Script window for the boxplot commands***                |\n+=======================================================================+\n| 1.  Dodoma \\<- data_book\\$get_data_frame(data_name=\\\"Dodoma_merge\\\")  |\n|                                                                       |\n| 2.  last_graph \\<- ggplot2::ggplot(data=Dodoma_merge,                 |\n|     mapping=ggplot2::aes(y=Rain, x=month)) +                          |\n|     ggplot2::geom_boxplot(varwidth=TRUE, outlier.colour=\\\"red\\\") +    |\n|     theme_grey()                                                      |\n|                                                                       |\n| 3.  data_book\\$add_graph(graph_name=\\\"last_graph\\\", graph=last_graph, |\n|     data_name=\\\"Dodoma\\\")                                             |\n|                                                                       |\n| 4.  data_book\\$get_graphs(data_name=\\\"Dodoma\\\",                       |\n|     graph_name=\\\"last_graph\\\")                                        |\n|                                                                       |\n| 5.  rm(list=c(\\\"last_graph\\\", \\\"Dodoma\\\"))                            |\n+-----------------------------------------------------------------------+\n\nThe second line -- that starts last_graph is the only line that needs to\nchange. The equivalent command, from the robustbase package, is as\nfollows:\n\nlast_graph \\<- robustbase::adjbox(Rain \\~ month, data =Dodoma_merge,\ncol=\\\"red\\\", varwidth=TRUE).\n\n  -----------------------------------------------------------------------\n  ***Fig. 3.4h***\n  -----------------------------------------------------------------------\n  ![](figures/Fig3.4h.png){width=\"6.059426946631671in\"\n  height=\"2.582607174103237in\"}\n\n  -----------------------------------------------------------------------\n\nSo paste or type that command into the Script Window, which should then\nlook as shown in Fig. 3.4h. To run the commands from the Script Window\nclick on the Run All button at the top of Fig. 3.4h.\n\nIf there is an error, then correct the typing into Fig. 3.4h. Now, to be\ncautious, right-click, see Fig. 3.4h and this permits you to run the\ncommands one line at a time. It is highly likely that line 2 is the\nproblem so first go to line 1 and then run line 1, using Run Current\nLine, or pressing \\<Ctrl\\> + \\<Enter\\>. Do the same for line 2. If that\nworks then continue with the rest of the lines and the graph, shown in\nFig. 3.4i should appear.\n\n  -----------------------------------------------------------------------\n  ***Fig. 3.4i Skew boxplot***\n  -----------------------------------------------------------------------\n  ![](figures/Fig3.4i.png){width=\"3.0629844706911635in\"\n  height=\"2.541402012248469in\"}\n\n  -----------------------------------------------------------------------\n\nThis example has used the Script Window for a new command. More often\nthe script window is for more modest changes, where an option is added\nor changed for an existing command.\n\nIf the command above were in a new package, that was not currently\nloaded into R-Instat, then the code in line 2 would not be recognised.\nIn that case you would have add an extra line at the top of the script\nwindow to load the package, e.g. ***install.packages(\\\"robustbase\\\").***\nThis assumes you are connected to the internet. It also only need be\ndone once. This package is then installed in R and can be used on\nsubsequent occasions in R-Instat without that line being added.\n\n## Don't let the computer laugh at you!\n\nR-Instat is designed to facilitate the analysis of climatic data. This\nmay be through using the general facilities (File, Prepare, Describe and\nModel menus), or through using the special climatic menu that is\nintroduced in Chapter 4.\n\nR-Instat is simply a click and point front-end to the R programming\nlanguage. It is particularly for users who do not wish to spend time\nmastering the R language. There is also a special guide for those who\nwould wish to start with R-Instat and then consider migrating to using R\n\"properly\".\n\nAll software has limitations and it is important to recognise when using\nR-Instat, or perhaps your favourite spreadsheet package is not the\ncorrect solution for your work. We give an example below. Otherwise you\nmay fall into the \"copy-paste\" trap. This is where you do a very routine\njob repeatedly, e.g. copy \\> paste, copy \\> paste, .... Humans are not\ngood at boring and repetitive jobs and they make mistakes.\n\nComputers, on the other hand, can be programmed to handle repetitive\ntasks brilliantly and very quickly. That's why, if the computer watches\nyou doing copy \\>paste, copy \\> paste etc, while it has little to do --\nthen it is probably laughing at you!\n\nHere is an example. It is of a type we discuss in more detail in Chapter\n4. Here it is mainly designed to help you to recognise when your\nsoftware, and perhaps your skill set is insufficient for the task in\nhand.\n\nClimatic data from Garoua, Cameroon have been provided by the Cameroon\nMet Service and are now available in the R-Instat library, Fig. 3.5a.\n\n  -------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.5a Garoua data in R-Instat***                ***Fig. 3.5b Maximum temperature data***\n  ------------------------------------------------------ ------------------------------------------------------\n  ![](figures/Fig3.5a.png){width=\"2.741365923009624in\"   ![](figures/Fig3.5b.png){width=\"3.353319116360455in\"\n  height=\"2.056022528433946in\"}                          height=\"2.047866360454943in\"}\n\n  -------------------------------------------------------------------------------------------------------------\n\nFig. 3.5a shows the \"standard\" layout of the data for R-Instat climatic\nanalyses. Spreadsheet packages like Excel, recognise this as a\n\"list\"[^15]. Each column in Fig. 3.5a is of a single \"type\" -- most are\nnumeric. The different elements each have their own column. In Fig. 3.5a\neach row has the data for a single day. In this file there 21915 rows\n(days) of data.\n\nThe starting point for these data looked very different. Some of the\ninitial data for Tmax are shown in Fig. 3.5b. In Fig. 3.5b each day of\nthe month has its own column, so there are 31 columns in the sheet. We\nfind this to be a common \"shape\". One additional problem in Fig. 3.5b is\nthat each sheet has only about 3 years of data, so they are split across\n16 different sheets.\n\nThe rainfall is in a different \"shape\" to the temperatures as shown in\nFig. 3.5c and Fig. 3.5d.\n\n  ---------------------------------------------------------------------------------------------------------------\n  ***Fig. 3.5c Rainfall data for Garoua***                ***Fig. 3.5d More of the year of rainfall data***\n  ------------------------------------------------------- -------------------------------------------------------\n  ![](figures/Fig3.5c.png){width=\"3.0532458442694663in\"   ![](figures/Fig3.5d.png){width=\"3.1601771653543307in\"\n  height=\"1.6980621172353456in\"}                          height=\"1.7202580927384077in\"}\n\n  ---------------------------------------------------------------------------------------------------------------\n\nFor the rainfall, each year is in a separate sheet. At the bottom of\neach sheet there are some monthly and annual totals. Hence the rainfall\nis a mixture of data and summary values.\n\nThere are three obvious ways you can proceed to change the shape of the\ndata from Fig. 3.5b, c and d into the shape shown in Fig. 3.5a. The\nfirst is to use Excel (or another spreadsheet), the second is to use\nR-Instat and the third is to write a program, using R commands -- or\nanother language, such as Python.\n\nWhat might you do with a spreadsheet? Here is a possible way:\n\n1)  It would be good to have all the years of data in a single sheet.\n    Start with the first year, which is 1999 for the rainfall. Copy just\n    the data -- not the monthly summaries -- into a new sheet.\n\n2)  Now go to the next year, i.e. 2000 and copy the data below those of\n    1999.\n\n3)  Now go to 2001 and copy and paste again. The computer is starting to\n    laugh, and you have a long way to go.\n\n4)  You persevere and have all the years in your new sheet.\n\n5)  Now you want to paste the February data below January, etc. This is\n    11 more goes at copy \\> paste.\n\n6)  You are bored, so you look briefly at the temperature data in Fig.\n    3.5d. You realise, in horror, that you will have 31 copy \\> paste to\n    do there, with one column currently for each month.\n\n7)  You give up, realising there must be a better way. That's partly\n    because you realise the computer is laughing hysterically!\n\nWe took the third option and wrote a program in R. In Chapter 4 we\nexamine whether using R-Instat would be possible (without the computer\nlaughing at you too much).\n\nHowever, there is a general message. R-Instat is merely executing R\ncommands through a click-and-point environment. This approach will\nalways be limited, for some tasks, compared to using the command\nlanguage directly. So, should you find that an analysis requires a lot\nof repetition from you, then check whether it is time to use R directly.\n\nWhen you start using R-Instat it does not mean you need to abandon using\na spreadsheet. Similarly using R directly does not necessarily mean\nabandoning R-Instat. When you use R-Instat it automatically generates a\nlog file with the R commands. This file runs in RStudio. So, you could\nthen continue using R directly (through RStudio) for those tasks where\nR-Instat has been found to be limiting.","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"Chapter_3_Using_RInstat_effectively.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.45","bibliography":["references.bib"],"theme":"cosmo"},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","output-file":"Chapter_3_Using_RInstat_effectively.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"block-headings":true,"bibliography":["references.bib"],"documentclass":"scrreprt"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf"]}