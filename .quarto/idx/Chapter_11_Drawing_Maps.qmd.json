{"title":"Drawing Maps","markdown":{"headingText":"Drawing Maps","containsRefs":false,"markdown":"## Introduction\n\nClimatic data is often presented in map form. Common examples include\ndetails of the stations in each country, plus further information about\neach station.\n\nPreparing a map is usually a 2-stage process. The first stage, described\nin Section 10.2, uses a shape file to provide an outline of the country,\nand other general details. Then climatic details are added, as is\ndescribed in Section 10.3.\n\n## Using a shape file\n\nR-Instat does not currently have any shape files in the library, so they\nhave to be downloaded. There are various sites that offer shape files\nand GADM (GADM, 2019) is comprehensive, Fig. 10.2a.\n\n  -----------------------------------------------------------------------\n  ***Fig. 10.2a The GADM data page***\n  -----------------------------------------------------------------------\n  ![](media/image190.png){width=\"6.11749343832021in\"\n  height=\"3.305452755905512in\"}\n\n  -----------------------------------------------------------------------\n\nC licking on country in Fig. 10.1a allows the input of a country name,\nas shown in Fig. 10.2b. For Kenya, as for most other formats, there are\ndifferent ways to download the data.\n\n+------------------------------+---------------------------------------+\n| ***Fig. 10.2b***             | ***Fig. 10.2c***                      |\n|                              |                                       |\n|                              | ***Climatic \\> File \\> Open and Tidy  |\n|                              | Shapefile***                          |\n+==============================+=======================================+\n| ![](media/image185.png){     | ![](media/image                       |\n| width=\"2.7050929571303586in\" | 187.png){width=\"3.3892760279965004in\" |\n| h                            | height=\"1.7678455818022747in\"}        |\n| eight=\"2.183115704286964in\"} |                                       |\n+------------------------------+---------------------------------------+\n\nData at level 0 is simply the country boundary, while level 1 gives the\noutline for each of Kenya's 47 counties. Levels 2 and 3 provide even\nmore detail.\n\nIn Fig. 10.2b the R(sf) option provides a file, with an ***rds***\nextension, that can be opened into R-Instat through the ***File \\>\nOpen*** dialogue. However, we suggest clicking on Shapefile in Fig.\n10.2. This downloads a zip file that is about 20 Mbytes for Kenya and\nwhich contains data at all 4 levels, 0, 1, 2, 3.\n\nUnzip this file. In R-Instat use ***Climatic \\> File \\> Open and Tidy\nShapefile***, Fig. 10.2c. Go to the unzipped files and open the Level 1\nshapefile. There are 47 rows of data, shown in Fig. 10.2d, (after\nreordering the variables for clarity.)\n\n  ------------------------------------------------------------------------------------------------------------\n  ***Fig. 10.2d***                                       ***Fig. 10.2e***\n  ------------------------------------------------------ -----------------------------------------------------\n  ![](media/image188.png){width=\"3.5070898950131233in\"   ![](media/image163.png){width=\"2.380729440069991in\"\n  height=\"3.419274934383202in\"}                          height=\"2.9443088363954506in\"}\n\n  ------------------------------------------------------------------------------------------------------------\n\nGo to ***Climatic \\> Mapping***. Part of this dialogue is shown in Fig.\n10.2e. Choose the data frame with the shape file if it isn't chosen\nautomatically. Then just press Ok for the map shown in Fig. 10.2f.\n\nWhat could be easier?\n\nReturn to the ***Climatic \\> Mapping*** dialogue and add the\n***NAME_1*** variable from Fig. 10.2d into the ***Fill field*** of Fig.\n10.2e. The result is in Fig. 10.2g. The map is now nicely colourful. If\nthere were, say, 10 regions, this would be fine, but with 47 counties\nthe legend is taking too much space and can't easily be associated with\neach county.\n\n  ----------------------------------------------------------------------------------------------------------\n  ***Fig. 10.2fKenya county map***                     ***Fig. 10.2g***\n  ---------------------------------------------------- -----------------------------------------------------\n  ![](media/image172.png){width=\"2.97536198600175in\"   ![](media/image189.png){width=\"3.021402012248469in\"\n  height=\"3.437853237095363in\"}                        height=\"2.575886920384952in\"}\n\n  ----------------------------------------------------------------------------------------------------------\n\nSo, return to the ***Climatic \\> Mapping*** dialogue. Press ***Plot\nOptions,*** then use the ***Theme*** tab and set the ***Legend to\nNone***, Fig. 10.2h.\n\n  -------------------------------------------------------------------------------------------------------------\n  ***Fig. 10.2h***                                       ***Fig. 10.2i***\n  ------------------------------------------------------ ------------------------------------------------------\n  ![](media/image139.png){width=\"2.9793011811023624in\"   ![](media/image166.png){width=\"3.0055807086614172in\"\n  height=\"2.9853805774278217in\"}                         height=\"3.5880883639545056in\"}\n\n  -------------------------------------------------------------------------------------------------------------\n\nThe resulting map is shown in Fig. 10.2i.\n\nSometimes it is useful for an initial map to include the names of the\ndistricts as labels.\n\nReturn to the ***Climatic \\> Mapping*** dialogue and include the same\ndata frame also on the right-hand side of the dialogue, Fig 10.2j.\n\n  -----------------------------------------------------------------------\n  ***Fig. 10.2j***\n  -----------------------------------------------------------------------\n  ![](media/image182.png){width=\"5.439518810148732in\"\n  height=\"2.9879385389326334in\"}\n\n  -----------------------------------------------------------------------\n\nThe initial results are in Fig. 10.2k. It shows that, with 47 labels we\nhave given the software a considerable challenge to make all the labels\nvisible. The geom is called geom_label_repel and has done its best, but\nperhaps it needs some help. Two possibilities are to make the labels\nsmaller, Fig. 10.2l, or to omit the box round each label. This then uses\ngeom_text_repel instead, Fig. 10.2m.\n\n  -----------------------------------------------------------------------------------------------------------\n  ***Fig. 10.2k***                                       ***Fig. 10.2l***\n  ------------------------------------------------------ ----------------------------------------------------\n  ![](media/image103.png){width=\"3.0282250656167977in\"   ![](media/image74.png){width=\"2.979179790026247in\"\n  height=\"3.608007436570429in\"}                          height=\"3.6041830708661418in\"}\n\n  -----------------------------------------------------------------------------------------------------------\n\nFinally, in this section, we go \"down a level\". This uses the level 2\ndata, which has 310 rows. Then we filter to give just one district,\nchoosing Kisumu. (A few neighbouring districts could be chosen.) The\nresulting map is shown in Fig. 10.2n.\n\nThe GADM site is limited to administrative data only. There are other\nsites, such as\n[[http://www.diva-gis.org/]{.underline}](http://www.diva-gis.org/) with\nadditional information, such as roads and elevation.\n\n  ---------------------------------------------------------------------------------------------------------\n  ***Fig. 10.2m Text, rather than label***             ***Fig. 10.2n***\n  ---------------------------------------------------- ----------------------------------------------------\n  ![](media/image78.png){width=\"2.865278871391076in\"   ![](media/image85.png){width=\"3.192403762029746in\"\n  height=\"3.3938265529308835in\"}                       height=\"1.2317147856517936in\"}\n\n  ---------------------------------------------------------------------------------------------------------\n\n## Adding station data\n\nAdding station data to a map is just as easy as adding the county\ninformation in Section 10.2. If your data are in CLIMSOFT, and you have\nthe necessary permissions, then transferring the data may be done with\nthe ***Climatic \\> File \\> Import from Climsoft*** dialogue. Here we\nillustrate with the Kenya data from the Instat library.\n\nUse ***File \\> Open from Library \\> Instat \\> Browse \\> Climatic \\>\nKenya*** and open the file called western_kenya.rds. This has 3 data\nframes, including one called wkenya_stationinfo, Fig. 10.3a.\n\n  ----------------------------------------------------------------------------------------------------------\n  ***Fig. 10.3a***                                     ***Fig. 10.3b***\n  ---------------------------------------------------- -----------------------------------------------------\n  ![](media/image60.png){width=\"4.219044181977253in\"   ![](media/image63.png){width=\"1.6362029746281714in\"\n  height=\"3.1557469378827645in\"}                       height=\"2.9429680664916886in\"}\n\n  ----------------------------------------------------------------------------------------------------------\n\nThere are 52 stations, Fig. 10.3a, and the information includes the\nCounty as well as the latitude and longitude. An initial step is to\nexamine how many counties have data. This uses the ***Right-Click***\nfrom the top of the County column, and the ***Levels/Labels*** option,\nalso shown in Fig. 10.3a.\n\nThe Levels/Labels dialogue shows there are data from 12 counties. The\nspelling is consistent with the County=level file, used in Section 10.2\nexcept for Homabay, which we change, in this dialogue, to Homa Bay.\n\nThis initial check is important, as any spelling mistakes in the county\nname, when entering the data, will invent a new county!\n\n+-------------------------------+--------------------------------------+\n| ***Fig. 10.3d Filter the map  | ***Fig. 10.3e Map file for Western   |\n| file***                       | Kenya***                             |\n|                               |                                      |\n| ***Right Click \\> Filter \\>   |                                      |\n| Define New Filter***          |                                      |\n+===============================+======================================+\n| ![](media/image61.png         | ![](media/imag                       |\n| ){width=\"2.791648075240595in\" | e62.png){width=\"3.346146106736658in\" |\n| height=\"2.561923665791776in\"} | height=\"2.414307742782152in\"}        |\n+-------------------------------+--------------------------------------+\n\nReturn to the level 1 map file, Right-Click and Filter to choose the\nsame 12 counties, Fig. 10.3d. The data file should now have just 12\nrows, to match the number of counties that will be mapped.\n\nReturn to the Climatic \\> Mapping dialogue. The map information is on\nthe left-hand side of the dialogue and the new station information is\nnow on the right, Fig. 10.3f.\n\n  -----------------------------------------------------------------------\n  ***Fig. 10.3f***\n  -----------------------------------------------------------------------\n  ![](media/image58.png){width=\"5.3781485126859145in\"\n  height=\"3.0781649168853895in\"}\n\n  -----------------------------------------------------------------------\n\nThe result is shown in Fig. 10.3g with labels, and with the county given\nas a legend. Fig. 10.3h uses text and omits the legend. This is quite a\nchallenging map, because so may stations are close together.\n\n  -----------------------------------------------------------------------------------------------------------\n  ***Fig. 10.3g***                                     ***Fig. 10.3h***\n  ---------------------------------------------------- ------------------------------------------------------\n  ![](media/image59.png){width=\"3.244919072615923in\"   ![](media/image101.png){width=\"2.7297692475940507in\"\n  height=\"2.782950568678915in\"}                        height=\"2.7890474628171478in\"}\n\n  -----------------------------------------------------------------------------------------------------------\n\nThe results show there are at least 2 obvious errors in the data. The\nmost obvious is Chemilil, which should be in Kisumu county, but is shown\nin the middle of Kajaido. And Akira, that should be in Kajaido is shown\nslightly outside any of the counties. It is tempting to correct these\nobvious errors. However, better is the message that there may be other\nerrors and a strategy for checking the geographical information would be\nuseful.\n\nWe wonder whether google maps could be used for checking? This aspect\nhas become important, partly because of the potential of combining\nstation and satellite information. However, the combining is only\nsensible if the locations of the station data are correct.\n\n## Information about the stations\n\n[To be added.]{.mark}\n\n## Further types of mapping\n\n[Contours, gridded data]{.mark}","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"Chapter_11_Drawing_Maps.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.45","bibliography":["references.bib"],"theme":"cosmo"},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","output-file":"Chapter_11_Drawing_Maps.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"block-headings":true,"bibliography":["references.bib"],"documentclass":"scrreprt"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf"]}