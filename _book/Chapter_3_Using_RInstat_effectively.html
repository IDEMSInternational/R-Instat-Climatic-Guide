<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.45">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; Using R-Instat effectively – R-Instat Climatic Guide</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Chapter_4_Getting_the_data_into_shape.html" rel="next">
<link href="./Chapter_2_More_Practice_with_RInstat.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Chapter_3_Using_RInstat_effectively.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Using R-Instat effectively</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R-Instat Climatic Guide</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Acknowledgments</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_1_About_this_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">About this guide</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_2_More_Practice_with_RInstat.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">More Practice with R-Instat</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_3_Using_RInstat_effectively.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Using R-Instat effectively</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_4_Getting_the_data_into_shape.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Getting the data into shape</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_5_Quantity_and_quality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Quantity and quality?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_6_Preparing_summaries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Preparing summaries</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_7_Tailored_Products.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Tailored Products</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_8_Efficient_use_of_RInstat_and_R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Efficient use of R-Instat and R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_9_Gridded_Data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Gridded Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_10_Comparing_Data_from_Different_Sources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Comparing Data from Different Sources</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_11_Drawing_Maps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Drawing Maps</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_12_Extremes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Extremes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_13_PICSA__Long_Before_the_season.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">PICSA – Long Before the season</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_14_The_Seasonal_forecast.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">The Seasonal forecast</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_15_Fitting_and_using_stochastic_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Fitting and using stochastic models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_16_Withinday_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Within-day data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_17_Circular_data_and_wind_roses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Circular data and wind roses</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_18_Temperatures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Temperatures</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_19_Drought_Indices__SPI.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Drought Indices – SPI</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_20_Climate_Normals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Climate Normals</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_21_Various.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Various</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_22_References.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">References</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter_23_Index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Index</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">4.1</span> Introduction</a></li>
  <li><a href="#column-and-data-frame-metadata" id="toc-column-and-data-frame-metadata" class="nav-link" data-scroll-target="#column-and-data-frame-metadata"><span class="header-section-number">4.2</span> Column and data frame metadata</a></li>
  <li><a href="#graphs" id="toc-graphs" class="nav-link" data-scroll-target="#graphs"><span class="header-section-number">4.3</span> Graphs</a></li>
  <li><a href="#the-log-and-script-windows" id="toc-the-log-and-script-windows" class="nav-link" data-scroll-target="#the-log-and-script-windows"><span class="header-section-number">4.4</span> The log and script windows</a></li>
  <li><a href="#dont-let-the-computer-laugh-at-you" id="toc-dont-let-the-computer-laugh-at-you" class="nav-link" data-scroll-target="#dont-let-the-computer-laugh-at-you"><span class="header-section-number">4.5</span> Don’t let the computer laugh at you!</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Using R-Instat effectively</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">4.1</span> Introduction</h2>
<p>R-Instat is simply a front end to the R programming language, Wikipedia (2019). R started in the 1990s and consists of a relatively small core, that is maintained by the R development core team. There are then also over 12 thousand packages that extend R’s capabilities. About 200 of these packages are included (behind the scenes) in R-Instat.</p>
<p>The front end in R-Instat is written in Visual Basic.Net. This front end provides the menus and dialogues that are used to run R-Instat. The default view of R-Instat is shown in Fig. 3.1a. It has 2 windows, one showing part of the data and the other is for the results or output.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 98%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.1a</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1134.png" style="width:6.15875in;height:3.27184in" alt="C:\Users\ROGERS~1\AppData\Local\Temp\SNAGHTMLc875082.PNG"></td>
</tr>
</tbody>
</table>
<p>R-Instat looks a little like a spreadsheet package, but there are differences. One, shown in Fig. 3.1, is that the results are in a separate window, rather than on successive sheets. Also, the data shown in Fig. 3.1a are stored in an R data frame (behind the scenes) and what you see is often only a small part of these data.</p>
<p>Current spreadsheets have a limit of about 1million rows. This not a limit in R, (or therefore in R-Instat) where your machine’s memory imposes a limit that is usually larger. However, the effort of continually copying all the data to the front end would slow R-Instat and hence (by default) we just show the first 1000 rows of data and the first 30 columns[^8].</p>
<p>One way to see all the data in the current data frame[^9] is shown in Fig. 3.1b. Just <strong><em>right-click</em></strong> on the tab at the bottom and choose <strong><em>View Data Frame,</em></strong> Fig. 3.1c.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 31%">
<col style="width: 67%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.1b</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.1c</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1149.png" style="width:2.13743in;height:2.04389in"></td>
<td style="text-align: left;"><img src="media/image1146.png" style="width:3.90648in;height:2.84051in" alt="C:\Users\ROGERS~1\AppData\Local\Temp\SNAGHTMLc9d2c55.PNG"></td>
</tr>
</tbody>
</table>
<p>The same result could alternatively be done through <strong><em>Prepare &gt; Data Frame &gt; View data</em></strong> as shown in Fig. 3.1d. This gives a dialogue. From here, as shown in Fig. 3.1e, you can choose any of the open Data Frames. Then click Ok to again show the data in R, Fig. 3.1c.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 31%">
<col style="width: 67%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.1d</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.1e</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1148.png" style="width:2.99875in;height:2.47723in"></td>
<td style="text-align: left;"><img src="media/image1160.png" style="width:2.97072in;height:2.98024in" alt="C:\Users\ROGERS~1\AppData\Local\Temp\SNAGHTMLc9b3538.PNG"></td>
</tr>
</tbody>
</table>
<p>The menu and dialogue in Fig. 3.1d and 3.1e are all part of the “front-end” of R-Instat. When you click Ok, R-Instat constructs an R command and sends it to R. The results are then returned to the front-end.</p>
<p>The output (results) window shows the R command that has been sent, as well as the output, if any. <strong><em>Right-click</em></strong> in the <strong><em>Output Window</em></strong>, Fig. 3.1f, if you wish to turn this off for future commands.</p>
<p>In the data window <strong><em>right-click in the name field</em></strong> to provide some common options, Fig. 3.1g. Alternatively, each of these options is available from the <strong><em>Prepare Menu</em></strong>.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 49%">
<col style="width: 49%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.1f</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.1g</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1174.png" style="width:3.02417in;height:2.06322in"></td>
<td style="text-align: left;"><img src="media/image1151.png" style="width:2.97675in;height:2.69in"></td>
</tr>
</tbody>
</table>
<p>The data and output windows are the most important in R-Instat. There are four more windows. The use of the two metadata windows is described in Section 3.2 and the Log plus Script Windows are described in Section 3.3.</p>
</section>
<section id="column-and-data-frame-metadata" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="column-and-data-frame-metadata"><span class="header-section-number">4.2</span> Column and data frame metadata</h2>
<p>The R data frames used through R-Instat contain data together with some metadata. The name of each variable is part of the metadata as is a label for each variable. R-Instat has data in a set of <strong><em>data-sheets</em></strong>. An R-Instat <strong><em>data sheet</em></strong> is an R data frame with added metadata. The added information includes information on key columns together with links to other sheets. This helps R-Instat keep track of multiple data frames that are connected, such as the monthly summaries calculated from the daily data. A data sheet also keeps information on objects that have been produced and saved, such as graphs and models.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 97%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.2aThe toolbar and View menu</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1179.png" style="width:5.88428in;height:2.32151in"></td>
</tr>
</tbody>
</table>
<p>Use the <img src="media/image1147.png" style="width:0.32343in;height:0.29291in"> icon on the toolbar, (Fig. 3.2a) or <strong><em>View &gt; Column Metadata</em></strong> to see the metadata currently associated with each open data frame. An example is in the top left in Fig. 3.2b.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 98%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.2b</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1152.png" style="width:6.19318in;height:3.7589in" alt="C:\Users\ROGERS~1\AppData\Local\Temp\SNAGHTML5265ebf.PNG"></td>
</tr>
</tbody>
</table>
<p>As with Excel you can open multiple data frames when using R-Instat. The column metadata shown in Fig. 3.2b has tabs at the bottom, just like the data (also shown in Fig. 3.2b), so you can check on the metadata for any data frame. An R-Instat <strong><em>data book</em></strong> is the set of open <strong><em>data sheets.</em></strong></p>
<p>Using <strong><em>View &gt; Data Frame Metadata</em></strong>, Fig. 3.2b (top right) opens another window in which each row shows the metadata on a data sheet. The information in Fig. 3.2b includes the name of the sheet, an optional descriptive label, and the number of columns currently in the sheet.</p>
<p>If you use <strong><em>File &gt; Save As &gt; File Data As,</em></strong> Fig. 3.2c, at any stage, then R-Instat saves the whole data book, i.e.&nbsp;all the data frames, together with all the associated meta data, into a single file. This file has the extension RDS and this data book can later be re-opened in R-Instat[^10]. Good practice is usually to work on a single topic in each data book, i.e.&nbsp;the different data sheets are usually interconnected. As with Excel, there is nothing stopping you having all sorts of unconnected data sheets in the same book, but this usually complicates your work.</p>
<p>Some tasks are made simpler through the Column Metadata window, Fig. 3.2d. You can double-click in the name field of any column to change the name. You can add or change the label in the same way, Fig. 3.2. For numeric columns R chooses the number of significant figures to display. That is also shown in the metadata and can be changed[^11]. In addition, as shown in Fig. 3.2c, right clicking on the left-hand side gives the same popup menu of common tasks as is available from the data view.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 49%">
<col style="width: 49%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.2c</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.2d</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1137.png" style="width:2.74799in;height:2.10738in"></td>
<td style="text-align: left;"><img src="media/image1226.png" style="width:3.16879in;height:3.74325in"></td>
</tr>
</tbody>
</table>
<p>Each Window button in the toolbar, Fig. 3.2e and the Options in the View Menu, Fig. 3.2f act like an on-off switch. So now use the curly arrow to reset to the default of the data and output windows side by side.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 49%">
<col style="width: 49%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.2e</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.2f</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1225.png" style="width:2.77954in;height:2.55545in"></td>
<td style="text-align: left;"><img src="media/image1219.png" style="width:2.18067in;height:2.70153in"></td>
</tr>
</tbody>
</table>
<p>In this section we have added more of the 6 Windows available in R-Instat. The opposite is also useful. Once in the default layout, switching off the Data Window gives just the Output (Results) Window. Or switch off the Output Window to look at more columns of data. However, in that case remember to switch on the Output window to see any further results.</p>
</section>
<section id="graphs" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="graphs"><span class="header-section-number">4.3</span> Graphs</h2>
<p>Base R has a comprehensive graphics system, and this is used by many R packages. The grammar of graphics, Wilkinson (2005) is an influential book and has led to the exciting ggplot package (gg for grammar of graphics) and graphics system in R. One challenge we had in constructing R-Instat was to make the ggplot system easy to use. Almost all the graphs in this guide use this system. One example that does not, is the adjusted boxplot shown in Fig. 3.5i.</p>
<p>In this section we describe key concepts of the ggplot system and of our implementation.</p>
<p>One concept is “facets”. Fig. 2.4u is an example of a facetted graph, where there is one facet for each month. The default is for the x and y scales to be the same for each graph[^12], so the months can be compared easily. Also, you are not diverted by lots of axis scales for each month.</p>
<p>Some multiple graphs show different information in each pane, as was seen in Fig. 2.4m.</p>
<p>Within a graph you can have multiple layers. So, there are 2 layers in Fig. 2.4r, one for the station and the other for the satellite data. In Chapter 10 one layer in a map shows the districts in a country and another shows the position of each climatic station.</p>
<p>In each layer there is a geometric shape, or geom. A geom may be a point, a line, a boxplot etc.</p>
<p>In R-Instat the common geoms have their own dialogue as shown in Fig. 3.3a. We choose a boxplot in Fig. 3.3b for Tmax at Dodoma by month.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 31%">
<col style="width: 67%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.3a</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.3b</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1224.png" style="width:2.72331in;height:2.96851in"></td>
<td style="text-align: left;"><img src="media/image1222.png" style="width:2.9609in;height:3.38168in" alt="C:\Users\ROGERS~1\AppData\Local\Temp\SNAGHTMLa085dd4.PNG"></td>
</tr>
</tbody>
</table>
<p>Every graphics dialogue includes the option to save the resulting graph, by giving it a name. In Fig. 3.3b we called the graph Tmax_boxplot. This ggplot graph is now saved as part of the metadata associated with the Dodoma data frame.</p>
<p>If you don’t give a name, then the default name of last_graph is given automatically. But, of course, that name is overwritten when you do the next graph.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 48%">
<col style="width: 49%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.3c</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.3d</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1230.png" style="width:3.01445in;height:2.81191in"></td>
<td style="text-align: left;"><img src="media/image1239.png" style="width:3.03488in;height:2.83132in"></td>
</tr>
</tbody>
</table>
<p>Double-click in the graph, Fig, 3.3d to turn it blue. This also produces the popup menu and the graph can be copied to the clipboard.</p>
<p>An alternative is shown in Fig. 3.3e. <strong><em>Click</em></strong> on graph icon <img src="media/image1236.png" style="width:0.31567in;height:0.25254in"> in the toolbar to show the last graph in R’s viewer. This only shows a single graph, but the Window can be resized and, as shown in Fig. 3.3e, there are now many options to save the graph, or to copy it to the clipboard.</p>
<p>This toolbar option is only for the most recent graph. The <strong><em>Describe &gt; View Graph</em></strong> dialogue, Fig. 3.3f provides the option to view any of the saved graphs in this way[^13].</p>
<table class="caption-top table">
<colgroup>
<col style="width: 49%">
<col style="width: 49%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.3e The R graph viewer</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.3f Options for viewing graphs</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1213.png" style="width:2.93383in;height:3.1794in" alt="C:\Users\ROGERS~1\AppData\Local\Temp\SNAGHTMLa31a91e.PNG"></td>
<td style="text-align: left;"><img src="media/image1235.png" style="width:3.04079in;height:2.08133in" alt="C:\Users\ROGERS~1\AppData\Local\Temp\SNAGHTMLa3be5f8.PNG"></td>
</tr>
</tbody>
</table>
<p>We use the dialogue in Fig. 3.3f to show a third way to examine graphs; one that makes use of the excellent plotly package. This is called the Interactive Viewer in Fig. 3.3f. This opens the graph in a browser (though you don’t need to be online) as shown in Fig. 3.3g.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 97%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig.3.3g The (plotly) interactive viewer for ggplot graphs</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1218.png" style="width:6.0783in;height:3.51257in"></td>
</tr>
</tbody>
</table>
<p>In Fig. 3.3g the data for October are shown. This demonstrates that the boxplot shows the median (30.6°C), the quartiles, etc. In addition, you can hover over any point to find its value and zoom if a part of the plot is of special interest. This is a system worth exploring, so we add a second example. This also shows the value of facets in a graph.</p>
<p>Use <strong><em>Describe &gt; Specific &gt; Scatterplot</em></strong> to examine Tmax as the Y variable against Tmin as the X, Fig. 3.3h.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 51%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th><p><strong><em>Fig. 3.3h Initial use of scatterplot (geom point)</em></strong></p>
<p><strong><em>Describe &gt; Specific &gt; Scatter Plot</em></strong></p></th>
<th><strong><em>Fig. 3.3i Resulting graph</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><img src="media/image1192 .png" style="width:3.12971in;height:2.95417in"></td>
<td><img src="media/image1202.p ng" style="width:2.70165in;height:2.91952in"></td>
</tr>
</tbody>
</table>
<p>The resulting graph is relatively uninformative, except to demonstrate there is a lot of data. And you don’t need a special graphics system for a single graph like this. It does show there are a few outlying points that require closer investigation.</p>
<p>More concerning, as a principle, is that these are time series data. One property of time series is the seasonality and we could allow for this by looking separately at each month.</p>
<p>Return to the dialogue in Fig. 3.3h. Click on <strong><em>Plot Options</em></strong> and add the <strong><em>month</em></strong> factor as a facet, Fig. 3.3j. Press Return on the sub-dialogue. Then make the <strong><em>By Variable</em></strong> also the <strong><em>month</em></strong> factor and the L<strong><em>abel Variable</em></strong> the <strong><em>Date</em></strong>. Click OK to produce the result shown in Fig. 3.3k.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 49%">
<col style="width: 49%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.3j Plot options sub-dialogue</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.3kTmax v Tmin by month</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1201.png" style="width:2.64658in;height:2.24218in"></td>
<td style="text-align: left;"><img src="media/image1209.png" style="width:3.07205in;height:3.2636in"></td>
</tr>
</tbody>
</table>
<p>One feature of the graph in Fig. 3.3k is that there is the same x and y scales for each graph. This is appropriate here and has then the big advantage that the graph is not cluttered with many axes, so the data are more easily compared.</p>
<p>As with the overall graph in Fig 3.3i, one aspect to be investigated, from Fig. 3.3k, is the outliers. This is easily done via the interactive viewer. So, return to <strong><em>Describe &gt; View Graph</em></strong> and choose the last graph, possibly called scatter_Tmax.Tmin from Fig. 3.3h (or just last_graph if no name was given).</p>
<table class="caption-top table">
<colgroup>
<col style="width: 97%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig 3.3l Interactive view</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1210.png" style="width:6.16175in;height:2.64806in"></td>
</tr>
</tbody>
</table>
<p>The new feature in Fig. 3.3l is that you can now hover over any point and see the values in more detail. The example shown in Fig. 3.3l is that on 9 October 1989 both Tmax and Tmin were 15.6°C. Worth checking! From the graph 15.6°C is very sensible for Tmin but not for Tmax[^14].</p>
<p>Other dialogues also provide useful graphs. As an example, use <strong><em>Describe &gt; Multivariate &gt; Correlations</em></strong>, Fig. 3.3m as in Chapter 2.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 31%">
<col style="width: 67%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.3m</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.3n</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1216.png" style="width:2.70613in;height:1.98484in"></td>
<td style="text-align: left;"><img src="media/image1200.png" style="width:3.30684in;height:3.20808in" alt="C:\Users\ROGERS~1\AppData\Local\Temp\SNAGHTMLaa5e48d.PNG"></td>
</tr>
</tbody>
</table>
<p>Complete the dialogue as shown in Fig. 3.3n. Click on the Options button and complete the sub-dialogue as shown in Fig. 3.3o. The resulting display is in Fig. 3.3p.</p>
<p>For the data this indicates that both Tmax and Tmin have roughly normal distributions each month. The correlations are quite low. As with the other graphs more detail can be found from the plotly interactive display.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 67%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.3o Correlations sub-dialogue</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.3p Distributions, scatterplot and correlations</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1184.png" style="width:2.62941in;height:2.82749in" alt="C:\Users\ROGERS~1\AppData\Local\Temp\SNAGHTMLaa7a41f.PNG"></td>
<td style="text-align: left;"><img src="media/image1189.png" style="width:3.32619in;height:3.1183in"></td>
</tr>
</tbody>
</table>
<p>This is an example of a graphical display where the different panes show different types of display. Indeed, one pane is numeric. We used to think that a display in a graph was distinct from displaying tables of results. But Fig. 3.3p is like a 2 by 2 table, one cell of which contains numbers, while the others contain graphs.</p>
<p>Finish this section with a little “housekeeping”. Several objects (graphs) have been produced and perhaps are now no longer needed. Use <strong><em>Prepare &gt; R Objects &gt; Delete</em></strong>, Fig. 3.3q.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 32%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.3q Menu to manage R objects</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.3r Delete objects no longer needed</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1197.png" style="width:2.28768in;height:2.87769in"></td>
<td style="text-align: left;"><img src="media/image1203.png" style="width:3.70709in;height:2.59417in" alt="C:\Users\ROGERS~1\AppData\Local\Temp\SNAGHTMLb0219a7.PNG"></td>
</tr>
</tbody>
</table>
<p>We choose to delete all the objects, Fig. 3.3r.</p>
</section>
<section id="the-log-and-script-windows" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="the-log-and-script-windows"><span class="header-section-number">4.4</span> The log and script windows</h2>
<p>The final two Windows in R-Instat are for the Log Window and the Script Window.</p>
<p>The R programming language is very powerful, but with a relatively steep learning curve. R-Instat gives easy access to a subset of R. However, a click-and-point system always has limitations. We consider here some options if these limitations are ever a constraint.</p>
<p>The log file keeps a record of all the R-commands that have been issued during a session of R-Instat. Use the toolbar option <img src="media/image1276.png" style="width:0.28851in;height:0.27649in">, Fig. 3.2e, or <strong><em>View &gt; Log Window</em></strong> to open the log file.</p>
<p>In the Log file, the <strong><em>right-click menu</em></strong> gives various options, Fig. 3.4a, including saving the log file. That action is the same as using <strong><em>File &gt; Save As &gt; Save Log As</em></strong>, shown earlier in Fig. 3.2c.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 31%">
<col style="width: 67%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.4a The Log Window</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.4b The Filter Dialogue</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1293.png" style="width:3.02577in;height:1.6994in"></td>
<td style="text-align: left;"><img src="media/image1280.png" style="width:2.95569in;height:2.96513in" alt="C:\Users\ROGERS~1\AppData\Local\Temp\SNAGHTML6b171e8.PNG"></td>
</tr>
</tbody>
</table>
<p>The Log file keeps an exact record of what you have done so far in your R-Instat work. That is useful. If, later, you ever had to justify how you produced results, then this is your record of what was done.</p>
<p>If you need to ask for help, then we will usually want to relate anything extra to the best you have been able to do so far. A skilled R user can see exactly what was done through the log file.</p>
<p>If R is used directly, then we suggest it be used through RStudio. The log file can be run in RStudio and should produce the same results. Hence, an analysis could start in R-Instat and then continue in RStudio if further results are needed that cannot be done through R-Instat.</p>
<p>Sometimes a dialogue can almost do an analysis, but not quite. If small changes are needed to a command then they can be done, in R-Instat, with the Script Window</p>
<p>A guide called “Reading, Tweaking and Using R Commands”, <mark>reference</mark> allows users to adapt the commands behind any dialogue. This situation is illustrated with an example.</p>
<p>We show how to use adjusted boxplots (Hubert &amp; Vandervieren, 2008) for each month with the rainfall data from Dodoma. This is first illustrated with the ordinary boxplots that are available (and very useful). However, for the rainfall we would like to have adjusted boxplots because of the skewness of the data. They are available in the R package, called <strong><em>robustbase</em></strong> <mark>reference</mark> that is already used by R-Instat. But adjusted boxplots are not yet available – at least when this guide was first written.</p>
<p>First the data are filtered for just the rain days. Then the boxplots are produced.</p>
<p>With the Dodoma data, as used in Chapter 2, use the <strong><em>right-click</em></strong> menu (or <strong><em>Prepare &gt; Data Frame &gt; Filter</em></strong>) to give the Filter dialogue, Fig. 3.4b. Note, in Fig. 3.4b, that the Ok button is not yet enabled. There is also a Script button on the bottom right of the dialogue, and this is also disabled. Every dialogue has the same set of five buttons at the bottom. Hence, every dialogue has a <strong><em>Script</em></strong> button and here we show how it can be used. In Fig. 3.4b, press on the <strong><em>Define New Filter</em></strong> button to open the Filter sub-dialogue. In the sub-dialogue, Fig. 3.4c.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 31%">
<col style="width: 67%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.4c The filter sub-dialogue</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.4d The filter dialogue completed</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1305.png" style="width:3.16753in;height:2.70312in"></td>
<td style="text-align: left;"><img src="media/image1283.png" style="width:2.76678in;height:2.77561in" alt="C:\Users\ROGERS~1\AppData\Local\Temp\SNAGHTML6c2cda1.PNG"></td>
</tr>
</tbody>
</table>
<p>In the sub-dialogue, choose the <strong><em>Rain</em></strong> variable and make the condition as <strong><em>Rain &gt; 0.85</em></strong>. Then click the <strong><em>Add Condition</em></strong> button, then press the <strong><em>Return</em></strong> button. A filter has now been selected and hence the Ok button is now enabled. We don’t need the To Script button at this stage, but note that it has also been enabled.</p>
<p>Now use the <strong><em>Describe &gt; Specific &gt; Boxplot</em></strong> dialogue and complete it as shown in Fig. 3.4e.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 72%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.4e The boxplot dialogue</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.4f Boxplots with width proportional to the number of rain days</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1273.png" style="width:2.80512in;height:3.20375in" alt="C:\Users\ROGERS~1\AppData\Local\Temp\SNAGHTML6cfc546.PNG"></td>
<td style="text-align: left;"><img src="media/image1330.png" style="width:3.125in;height:3.125in"></td>
</tr>
</tbody>
</table>
<p>The results are in Fig. 3.4f. They are useful, and pleasantly colourful, but the number of outliers shows that the ordinary boxplot is not ideal for data that are as skew as daily rainfall.</p>
<p>So, return to the boxplot dialogue in Fig. 3.4e and press the <strong><em>To Script</em></strong> button. The commands are as shown in Fig. 3.4g</p>
<table class="caption-top table">
<colgroup>
<col style="width: 100%">
</colgroup>
<thead>
<tr class="header">
<th><strong><em>Fig. 3.4g Script window for the boxplot commands</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><ol type="1">
<li><p>Dodoma &lt;- data_book$get_data_frame(data_name="Dodoma_merge")</p></li>
<li><p>last_graph &lt;- ggplot2::ggplot(data=Dodoma_merge, mapping=ggplot2::aes(y=Rain, x=month)) + ggplot2::geom_boxplot(varwidth=TRUE, outlier.colour="red") + theme_grey()</p></li>
<li><p>data_book$add_graph(graph_name="last_graph", graph=last_graph, data_name="Dodoma")</p></li>
<li><p>data_book$get_graphs(data_name="Dodoma", graph_name="last_graph")</p></li>
<li><p>rm(list=c("last_graph", "Dodoma"))</p></li>
</ol></td>
</tr>
</tbody>
</table>
<p>The second line – that starts last_graph is the only line that needs to change. The equivalent command, from the robustbase package, is as follows:</p>
<p>last_graph &lt;- robustbase::adjbox(Rain ~ month, data =Dodoma_merge, col="red", varwidth=TRUE).</p>
<table class="caption-top table">
<colgroup>
<col style="width: 97%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.4h</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1304.png" style="width:6.05943in;height:2.58261in"></td>
</tr>
</tbody>
</table>
<p>So paste or type that command into the Script Window, which should then look as shown in Fig. 3.4h. To run the commands from the Script Window click on the Run All button at the top of Fig. 3.4h.</p>
<p>If there is an error, then correct the typing into Fig. 3.4h. Now, to be cautious, right-click, see Fig. 3.4h and this permits you to run the commands one line at a time. It is highly likely that line 2 is the problem so first go to line 1 and then run line 1, using Run Current Line, or pressing &lt;Ctrl&gt; + &lt;Enter&gt;. Do the same for line 2. If that works then continue with the rest of the lines and the graph, shown in Fig. 3.4i should appear.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 97%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.4i Skew boxplot</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1323.png" style="width:3.06298in;height:2.5414in"></td>
</tr>
</tbody>
</table>
<p>This example has used the Script Window for a new command. More often the script window is for more modest changes, where an option is added or changed for an existing command.</p>
<p>If the command above were in a new package, that was not currently loaded into R-Instat, then the code in line 2 would not be recognised. In that case you would have add an extra line at the top of the script window to load the package, e.g.&nbsp;<strong><em>install.packages("robustbase").</em></strong> This assumes you are connected to the internet. It also only need be done once. This package is then installed in R and can be used on subsequent occasions in R-Instat without that line being added.</p>
</section>
<section id="dont-let-the-computer-laugh-at-you" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="dont-let-the-computer-laugh-at-you"><span class="header-section-number">4.5</span> Don’t let the computer laugh at you!</h2>
<p>R-Instat is designed to facilitate the analysis of climatic data. This may be through using the general facilities (File, Prepare, Describe and Model menus), or through using the special climatic menu that is introduced in Chapter 4.</p>
<p>R-Instat is simply a click and point front-end to the R programming language. It is particularly for users who do not wish to spend time mastering the R language. There is also a special guide for those who would wish to start with R-Instat and then consider migrating to using R “properly”.</p>
<p>All software has limitations and it is important to recognise when using R-Instat, or perhaps your favourite spreadsheet package is not the correct solution for your work. We give an example below. Otherwise you may fall into the “copy-paste” trap. This is where you do a very routine job repeatedly, e.g.&nbsp;copy &gt; paste, copy &gt; paste, …. Humans are not good at boring and repetitive jobs and they make mistakes.</p>
<p>Computers, on the other hand, can be programmed to handle repetitive tasks brilliantly and very quickly. That’s why, if the computer watches you doing copy &gt;paste, copy &gt; paste etc, while it has little to do – then it is probably laughing at you!</p>
<p>Here is an example. It is of a type we discuss in more detail in Chapter 4. Here it is mainly designed to help you to recognise when your software, and perhaps your skill set is insufficient for the task in hand.</p>
<p>Climatic data from Garoua, Cameroon have been provided by the Cameroon Met Service and are now available in the R-Instat library, Fig. 3.5a.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 49%">
<col style="width: 49%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.5a Garoua data in R-Instat</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.5b Maximum temperature data</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1318.png" style="width:2.74137in;height:2.05602in"></td>
<td style="text-align: left;"><img src="media/image1309.png" style="width:3.35332in;height:2.04787in"></td>
</tr>
</tbody>
</table>
<p>Fig. 3.5a shows the “standard” layout of the data for R-Instat climatic analyses. Spreadsheet packages like Excel, recognise this as a “list”[^15]. Each column in Fig. 3.5a is of a single “type” – most are numeric. The different elements each have their own column. In Fig. 3.5a each row has the data for a single day. In this file there 21915 rows (days) of data.</p>
<p>The starting point for these data looked very different. Some of the initial data for Tmax are shown in Fig. 3.5b. In Fig. 3.5b each day of the month has its own column, so there are 31 columns in the sheet. We find this to be a common “shape”. One additional problem in Fig. 3.5b is that each sheet has only about 3 years of data, so they are split across 16 different sheets.</p>
<p>The rainfall is in a different “shape” to the temperatures as shown in Fig. 3.5c and Fig. 3.5d.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 49%">
<col style="width: 49%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong><em>Fig. 3.5c Rainfall data for Garoua</em></strong></th>
<th style="text-align: left;"><strong><em>Fig. 3.5d More of the year of rainfall data</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="media/image1296.png" style="width:3.05325in;height:1.69806in"></td>
<td style="text-align: left;"><img src="media/image1302.png" style="width:3.16018in;height:1.72026in"></td>
</tr>
</tbody>
</table>
<p>For the rainfall, each year is in a separate sheet. At the bottom of each sheet there are some monthly and annual totals. Hence the rainfall is a mixture of data and summary values.</p>
<p>There are three obvious ways you can proceed to change the shape of the data from Fig. 3.5b, c and d into the shape shown in Fig. 3.5a. The first is to use Excel (or another spreadsheet), the second is to use R-Instat and the third is to write a program, using R commands – or another language, such as Python.</p>
<p>What might you do with a spreadsheet? Here is a possible way:</p>
<ol type="1">
<li><p>It would be good to have all the years of data in a single sheet. Start with the first year, which is 1999 for the rainfall. Copy just the data – not the monthly summaries – into a new sheet.</p></li>
<li><p>Now go to the next year, i.e.&nbsp;2000 and copy the data below those of</p>
<ol start="1999" type="1">
<li></li>
</ol></li>
<li><p>Now go to 2001 and copy and paste again. The computer is starting to laugh, and you have a long way to go.</p></li>
<li><p>You persevere and have all the years in your new sheet.</p></li>
<li><p>Now you want to paste the February data below January, etc. This is 11 more goes at copy &gt; paste.</p></li>
<li><p>You are bored, so you look briefly at the temperature data in Fig. 3.5d. You realise, in horror, that you will have 31 copy &gt; paste to do there, with one column currently for each month.</p></li>
<li><p>You give up, realising there must be a better way. That’s partly because you realise the computer is laughing hysterically!</p></li>
</ol>
<p>We took the third option and wrote a program in R. In Chapter 4 we examine whether using R-Instat would be possible (without the computer laughing at you too much).</p>
<p>However, there is a general message. R-Instat is merely executing R commands through a click-and-point environment. This approach will always be limited, for some tasks, compared to using the command language directly. So, should you find that an analysis requires a lot of repetition from you, then check whether it is time to use R directly.</p>
<p>When you start using R-Instat it does not mean you need to abandon using a spreadsheet. Similarly using R directly does not necessarily mean abandoning R-Instat. When you use R-Instat it automatically generates a log file with the R commands. This file runs in RStudio. So, you could then continue using R directly (through RStudio) for those tasks where R-Instat has been found to be limiting.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Chapter_2_More_Practice_with_RInstat.html" class="pagination-link" aria-label="More Practice with R-Instat">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">More Practice with R-Instat</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Chapter_4_Getting_the_data_into_shape.html" class="pagination-link" aria-label="Getting the data into shape">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Getting the data into shape</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>